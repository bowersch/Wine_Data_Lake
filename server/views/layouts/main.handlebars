<!DOCTYPE html>
<html>
    <head>
        <title>Wine Data Lake</title>
        <link rel="stylesheet" href="/css/mainTemplate.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
        {{#each css}}
            <link rel="stylesheet" href="/css/{{this}}">
        {{/each}}
        <style>
           /* Popup style */
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.4);
        }
        
        .modal-content {
            background-color: #fff;
            margin: 15% auto;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
            max-width: 400px;
            text-align: center;
        }
        
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .close:hover,
        .close:focus {
            color: #555;
        }
        
        .button-wrapper {
            margin-top: 20px;
        }
        
        .button-wrapper button {
            padding: 10px 20px;
            margin: 0 10px;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            background-color: #8161b4;
            color: #fff;
            transition: background-color 0.3s;
        }
        
        .button-wrapper button:hover {
            background-color: #8161b4;
        }

        .button-wrapper{
            width: 40%;
            display: flex;
            justify-content: space-evenly;
            margin: 0 auto;
        }
           

    </style>
    </head>
    <body>
        <!-- Popup -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <p>Do you accept cookies and IPchecker?</p>
                <div class="button-wrapper">
                    <button id="yesBtn">Yes</button>
                    <button id="noBtn">NO</button>
                </div>
            </div>
        </div>

        <script src="https://kit.fontawesome.com/aa5ee9cb69.js" crossorigin="anonymous"></script>
        {{#each js}}
            <script src="/js/{{this}}"></script>
        {{/each}}
        <script>
            // Popup logic
            const modal = document.getElementById("myModal");
            const closeBtn = document.getElementsByClassName("close")[0];
            const yesBtn = document.getElementById("yesBtn");
            const noBtn = document.getElementById("noBtn");

            // Clicking outside the popup area to close the popup
            window.onclick = function (event) {
                if (event.target === modal) {
                    modal.style.display = "none";
                }
            };

            // Click the close button to close the popup
            closeBtn.onclick = function () {
                modal.style.display = "none";
            };

            // The callback function for the 'yes' button click
            function handleYes() {
                // The logic for handling the 'yes' button
                console.log("Yes button clicked");
                modal.style.display = "none";
            }

            // The callback function for the 'no' button click
            function handleNo() {
                // The logic for handling the 'no' button
                console.log("No button clicked");
                modal.style.display = "none";
            }

            // Bind the button click event
            yesBtn.addEventListener("click", handleYes);
            noBtn.addEventListener("click", handleNo);

            // Display the popup
            function showModal() {
                modal.style.display = "block";
            }

            // Example: Display the popup after the page has finished loading
            window.onload = function () {
                showModal();
            };
        </script>
        <div class="wrapper">
            <div class="header">
                <ul class="hamburgerMenu">
                    <li><a class="menuList" href="/">Home</a></li>
                    <li><a class="menuList" href="/directory">Directory</a></li>
                    <li><a class="menuList" href="/about">About Us</a></li>
                    <li><a class="menuList" href="/help">Help</a></li><br><br>
                    {{#if user}}
                        <li><a class="menuList" href="/favorites">Profile</a></li>
                        <li><a class="menuList" href="/logout">Sign Out</a></li>
                    {{else}}
                        <li><a class="menuList" href="/register">Sign Up</a></li>
                        <li><a class="menuList" href="/login">Sign In</a></li>
                    {{/if}}
                </ul>
                <button class="hamburger" onclick="showHamburgerMenu()">
                    <i class="fa-solid fa-bars fa-2xl" id="bars"></i>
                    <i class="fa-solid fa-xmark fa-2xl" id="xmark"></i>
                </button>
                <script>
                    // Citation
                    // Date: 04/20/2023
                    // Source: https://dev.to/ljcdev/easy-hamburger-menu-with-js-2do0
                    // Comment: followed tutorial by ljc-dev for a hamburger menu
                    function showHamburgerMenu() {

                        const hamburgerMenu = document.querySelector(".hamburgerMenu");
                        const bars = document.querySelector("#bars");
                        const xmark = document.querySelector("#xmark");

                        //display the hamburger icon, no menu
                        if(hamburgerMenu.classList.contains("showHamburgerMenu")){
                            hamburgerMenu.classList.remove("showHamburgerMenu");
                            xmark.style.display = "none";
                            bars.style.display = "block";
                        }
                        //display the menu with close icon (x)
                        else{
                            hamburgerMenu.classList.add("showHamburgerMenu");
                            xmark.style.display = "block";
                            bars.style.display = "none";
                        }
                    }

                </script>
                <button onclick="window.location.href='/';" class="logoWrapper">
                    <img src="/svg/logo.svg">
                </button>
                <div class="accountWrapper">
                    {{#if user}}
                        <div class="userWrapper">
                            <i class="fa-solid fa-user"></i>
                            <button onclick="window.location.href='/favorites';">{{user}}</button>
                        </div>
                        <div class="signOutWrapper">
                            <button onclick="window.location.href='/logout';">Sign Out</button>
                        </div>
                    {{else}}
                        <div class="signUpWrapper">
                            <button onclick="window.location.href='/register';">Sign Up</button>
                        </div>
                        <div class="signInWrapper">
                            <button onclick="window.location.href='/login';">Sign In</button>
                        </div>
                    {{/if}}
                </div>
            </div>
            <div class="mainContent">
                {{{body}}}
            </div>
            <div class="footer">
                <div class="contents">
                    <a href="/about">About</a> | <a href="/contact">Contact Us</a> | <a href="/developers">Developers</a> | <a href="/help">How to Use This Site</a>
                </div>
            </div>
        </div>
    </body>
</html>